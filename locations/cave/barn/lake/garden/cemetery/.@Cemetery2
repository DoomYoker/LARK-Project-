#!bin/bash/

#(re enter cemetery) - move to Cemetery Directory

echo "You re-enter the cemetery to still see the skeletons surrounding the statue, but they flinch away at the sight of the centaur."
sleep 1;
echo "The phoenix stays close to you as the centaur prepares to charge them."
sleep 1;
echo "The skeletons quickly lose formation and run away afraid, leaving only a single courageous commander behind to guard the key."
sleep 1;
echo "This gives you an opening as you sprint towards the angel statue."
sleep 1;
echo "You close the distance to the statue and reach out your hand to grab the key."
sleep 1;
echo "You quickly grasp onto the key when an armored giant of a skeleton closes it's fist around the other end."
sleep 1;
echo "You both pull back and forth between who has it, the key slips from both of your hands and lands on a nearby tombstone."
sleep 1;
echo "You and the giant draw your weapons as you prepare to duel."
sleep 1;
echo "You have two choices: "
sleep 1;
echo "A) Retreat and explore to better equip yourself    B) Fight the commander skeleton"
read ans
if [ $ans = 'B' ] || [ $ans = 'b' ]
then
echo " "
echo " "
echo "You will fight the commander by rolling random numbers between 0-10, the commander has a health of 50"
sleep 1;
echo "Each time you strike one skeleton it hits back."
sleep 1;
echo "If you use an item the commander will still attack you"
sleep 1;
echo "Basically, you must roll 30 total points in 5 turns (each turn is up to 10 points) Good Luck!"
sleep 1;
clear
SkeletonHealthTotal=50;
while [ $SkeletonHealthTotal -gt 0 ] && [ $health -gt 0 ]
do
echo " "
PS1="[ $name: $health $attack $defense ] "
echo "Player Health: $health   Skeleton Health Total: $SkeletonHealthTotal"
echo "Press A to Attack, B to useitem: "
read response
if [ $response = 'A' ] || [ $response = 'a' ]
then
DIV=$((6+1));
RandAttack=$(($RANDOM%$DIV + $attack));
SkeletonHealthTotal=$(($SkeletonHealthTotal-$RandAttack));
DIV2=$((10+1));
RandAttack2=$(($RANDOM%$DIV2 - $defense));
if [ $RandAttack2 -lt 0 ]
then
RandAttack2=0
fi
health=$(($health-$RandAttack2));
elif [ $response = 'B' ] || [ $response = 'b' ]
then
useItem
RandAttack2=$(($RANDOM%$DIV2 - $defense))
if [ $RandAttack2 -lt 0 ]
then
RandAttack2=0
fi
health=$(($health-$RandAttack2))
else
echo " "
echo "Your indecision costs you as the commander gets a free hit"
RandAttack2=$(($RANDOM%$DIV2 - $defense))
if [ $RandAttack2 -lt 0 ]
then
RandAttack2=0
fi
health=$(($health-$RandAttack2))
fi
if [ $SkeletonHealthTotal -le 29 ]
then
if [ $SkeletonHealthTotal -le 9 ]
then
echo "The Commander is on his last legs, finish this!"
else
echo "The Commander grows weary!"
fi
fi
if [ $health -le 0 ]
then
echo " "
echo "You have been defeated"
fi
if [ $SkeletonHealthTotal -le 0 ]
then
echo " "
echo "Congratulations, You have defeated the commander"
sleep 1;
echo "with the commander defeated you suddenly feel a burst of energy"
sleep 1;
echo "$name healed and health increased"
maxhealth=$(( $maxhealth + 5 ));
health=$(( $maxhealth ));
lives=$(( $lives + 1 ));
PS1="[ $name: $health $attack $defense ] ";
sleep 1;
echo "The defeated commander uses its last strength to crawl towards the key, but before it can reach the key it gets rammed by the centaur statue."
sleep 1;
echo "This causes the skeleton to explode into bones and fragments of it's once great armor that are flung everywhere, the key being left shining on the tombstone"
mv .+key \+key
rm $location/locations/cave/barn/lake/garden/cemetery/@Cemetery2
fi
done
else
echo " "
echo " "
echo "You have chosen to retreat and to gear up. Good luck, use ./Cemetary2 to"
sleep 1;
echo "Attempt the fight with the commander again."
sleep 1;
echo "( The commander must be defeated to proceed )"
fi
if [ "$health" = "0" ] || [ "$health" -lt "0" ]
then
lives=$(( $lives - 1 ));
echo "You have lost a life."
sleep 1;
echo "$lives lives remaining."
sleep 1;
if [ "$lives" = "0" ]
then 
echo "You Have lost all lives."
tput bold; echo "                               Game Over                               "
tput sgr0; echo "-----------------------------------------------------------------------"
echo "be more careful next time"
echo "Press any button to reset the game"
read hi
clear 
quit
fi
health=$(( $maxhealth ));
PS1="[ $name: $health $attack $defense ] ";
fi
echo "Press any button to continue: "
read hi
clear
